{% load static %}
{% load render_table from django_tables2 %}
{#<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>#}
<script src="{% static 'js/plotly-latest.min.js' %}"></script>


<style>
    @media (min-width: 768px) {
{#    @media (min-width: 768px) {#}
      .modal-xl {
        width: 90%;
          height: 300%;
       max-width:1200px;
      }
    }
</style>

    {% if preproc_sum %}
    <div class="row row-grid">
            <div class="col-lg-12">
            <div class="panel panel-primary">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" href="#Pre_summary" ><center>Preprocessing summary</center></a>
                </h4>
            </div>
            <!-- .panel-heading -->
            <div id="Pre_summary" class="panel-collapse collapse in">
                <div class="panel-body">

                    <div class="col-lg-10">
                        <pre style="white-space: pre-line">
                    {{ preproc_sum }}
                        </pre>
                    </div>
        <div class="row row-grid">
            {% for plot,img,div_id, img_id  in readLen_sum %}
                <div class="col-lg-6">
                    <a href="javascript:void(0)" ><img id="{{ img_id }}" src="{{ img  }}" alt="img" style="width:100%;height:100%;padding:1px;border:thin solid black;"  /> </a>
                </div>




{#        <div class="modal fade" id="modal_test" tabindex="-1" role="dialog" aria-labelledby="label" aria-hidden="true">#}
        <div class="modal" id="modal_test_{{ div_id }}" tabindex="-1" role="dialog" aria-labelledby="label" aria-hidden="true">
{#	    <div class="modal-dialog" role="document">#}
	    <div class="modal-dialog modal-xl" role="document">
	      <div class="modal-content" >
	        <div class="modal-body" >
                <div id="empty_div_{{ div_id }}">

                </div>
                    <!-- Plotly chart will be drawn inside this DIV -->
{#	          <img style="display:block; margin-left:auto; margin-right:auto; width:100%;" src="{{ MEDIA_URL }}{{ sumimgs.0  }}">#}
{#	          <h1 style="text-align: center;">hello there</h1>#}
	        </div>
	      </div>
	    </div>
	</div>


<script>
    $('#{{ img_id }}').click(function() {
     $("#modal_test_{{ div_id }}").modal('show');
{#     alert("this is a test");#}
     if (!document.getElementById("{{ div_id }}")){
         $('#empty_div_{{ div_id }}').append('{{ plot|escapejs }}');
     }
    });


{#     Plotly.relayout( "{{ div_id }}", { 'xaxis.autorange': true, 'yaxis.autorange': true });#}

</script>


{% endfor %}
             </div>
<br>

            </div>
        </div>
        </div>
            </div>

        </div>
{% endif %}


{% if profiling_lib %}
<div class="row row-grid">
            <div class="col-lg-12">
            <div class="panel panel-primary">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" href="#Prof_lib" ><center>Profiling by library</center></a>
                </h4>
            </div>
            <!-- .panel-heading -->
            <div id="Prof_lib" class="panel-collapse collapse">
                <div class="panel-body">

                    <div class="col-lg-10">
                        <pre style="white-space: pre-line">
                    {{ preproc_sum }}
                        </pre>
                    </div>
                </div>
            </div>
            </div>
            </div>
</div>

{% endif %}

{% if mapping_stat_table %}
<div class="row row-grid">
            <div class="col-lg-12">
            <div class="panel panel-primary">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" href="#Prof_type" ><center>Profiling by RNA type</center></a>
                </h4>
            </div>
            <!-- .panel-heading -->
            <div id="Prof_type" class="panel-collapse collapse">
                <div class="panel-body">

                    <div class="col-lg-12">

                        {% if mapping_stat_table %}
                                    <h3>{{ mapping_stat_table.name }}</h3>
                                        <div style="overflow: auto; margin-bottom: auto">
                                            {% render_table mapping_stat_table.content %}
                                        </div>
                        {% endif %}

                    </div>

                    <div class="row row-grid">
        {% for plot,img,div_id, img_id  in mapping_stat_plot %}
                <div class="col-lg-6">
                    <a href="javascript:void(0)" ><img id="{{ img_id }}" src="{{ img  }}" alt="img" style="width:100%;height:100%;padding:1px;border:thin solid black;"  /> </a>
                </div>




{#        <div class="modal fade" id="modal_test" tabindex="-1" role="dialog" aria-labelledby="label" aria-hidden="true">#}
        <div class="modal" id="modal_test_{{ div_id }}" tabindex="-1" role="dialog" aria-labelledby="label" aria-hidden="true">
{#	    <div class="modal-dialog" role="document">#}
	    <div class="modal-dialog modal-xl" role="document">
	      <div class="modal-content" >
	        <div class="modal-body" >
                <div id="empty_div_{{ div_id }}">

                </div>


                    <!-- Plotly chart will be drawn inside this DIV -->
{#	          <img style="display:block; margin-left:auto; margin-right:auto; width:100%;" src="{{ MEDIA_URL }}{{ sumimgs.0  }}">#}
{#	          <h1 style="text-align: center;">hello there</h1>#}
	        </div>
	      </div>
	    </div>
	</div>


<script>
    $('#{{ img_id }}').click(function() {
     $("#modal_test_{{ div_id }}").modal('show');
{#     alert("this is a test");#}
     if (!document.getElementById("{{ div_id }}")){
         $('#empty_div_{{ div_id }}').append('{{ plot|escapejs }}');
     }
    });


{#     Plotly.relayout( "{{ div_id }}", { 'xaxis.autorange': true, 'yaxis.autorange': true });#}

</script>

{% endfor %}
               </div>
<br>


                </div>
            </div>
            </div>
            </div>
</div>

{% endif %}

{% if readLen_type %}

    <div class="row row-grid">
            <div class="col-lg-12">
            <div class="panel panel-primary">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" href="#len_type" ><center>Profiling as a function of read length</center></a>
                </h4>
            </div>
            <!-- .panel-heading -->
            <div id="len_type" class="panel-collapse collapse in">
                <div class="panel-body">

    <div class="row row-grid">
        {% for plot,img,div_id, img_id  in readLen_type %}
                <div class="col-lg-6">
                    <a href="javascript:void(0)" ><img id="{{ img_id }}" src="{{ img  }}" alt="img" style="width:100%;height:100%;padding:1px;border:thin solid black;"  /> </a>
                </div>




{#        <div class="modal fade" id="modal_test" tabindex="-1" role="dialog" aria-labelledby="label" aria-hidden="true">#}
        <div class="modal" id="modal_test_{{ div_id }}" tabindex="-1" role="dialog" aria-labelledby="label" aria-hidden="true">
{#	    <div class="modal-dialog" role="document">#}
	    <div class="modal-dialog modal-xl" role="document">
	      <div class="modal-content" >
	        <div class="modal-body" >
                <div id="empty_div_{{ div_id }}">

                </div>


                    <!-- Plotly chart will be drawn inside this DIV -->
{#	          <img style="display:block; margin-left:auto; margin-right:auto; width:100%;" src="{{ MEDIA_URL }}{{ sumimgs.0  }}">#}
{#	          <h1 style="text-align: center;">hello there</h1>#}
	        </div>
	      </div>
	    </div>
	</div>


<script>
    $('#{{ img_id }}').click(function() {
     $("#modal_test_{{ div_id }}").modal('show');
{#     alert("this is a test");#}
     if (!document.getElementById("{{ div_id }}")){
         $('#empty_div_{{ div_id }}').append('{{ plot|escapejs }}');
     }
    });


{#     Plotly.relayout( "{{ div_id }}", { 'xaxis.autorange': true, 'yaxis.autorange': true });#}

</script>

{% endfor %}
               </div>
<br>

            </div>
        </div>
        </div>
            </div>

        </div>
{% endif %}




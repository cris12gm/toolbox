{#{% extends 'base.html' %}#}
{#{% extends 'photos/base.html' %}#}
{% extends "base.html" %}
{% load staticfiles %}



{% block content %}

{#{% load static %}#}

<link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">



{#{% block javascript %}#}
{#    <script src="{% static 'js/jquery-3.1.1.min.js' %}"></script>#}
{#    <script src="{% static 'js/bootstrap.min.js' %}"></script>#}
  {# JQUERY FILE UPLOAD SCRIPTS #}
  <script src="{% static 'js/jquery-file-upload/vendor/jquery.ui.widget.js' %}"></script>
  <script src="{% static 'js/jquery-file-upload/jquery.iframe-transport.js' %}"></script>
  <script src="{% static 'js/jquery-file-upload/jquery.fileupload.js' %}"></script>
{#    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>#}
{#      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>#}
{#    <script src="{% static 'js/jquery-3.1.1.min.js' %}"></script>#}
{#    <script src="{% static 'js/bootstrap.min.js' %}"></script>#}

  {# PHOTOS PAGE SCRIPTS #}
{#  <script src="{% static 'photos/js/progress-bar-upload.js' %}"></script>#}




<script>$(function () {

  $(".js-upload-photos").click(function () {
    $("#fileupload").click();
  });

  $("#fileupload").fileupload({
    dataType: 'json',
    sequentialUploads: true,

    start: function (e) {
      $("#modal-progress").modal("show");
    },

    stop: function (e) {
      $("#modal-progress").modal("hide");
    },

    progressall: function (e, data) {
      var progress = parseInt(data.loaded / data.total * 100, 10);
      var strProgress = progress + "%";
      $(".progress-bar").css({"width": strProgress});
      $(".progress-bar").text(strProgress);
    },

    done: function (e, data) {
      if (data.result.is_valid) {
        $("#gallery tbody").prepend(
          "<tr><td><a href='" + data.result.url + "'>" + data.result.name + "</a></td></tr>"
        )
      }
    }

  });

});</script>
<div id="page-wrapper">
    <div class="row">
        <div class="col-lg-12">
            <div class="page-header">
            <a href="{{ settings.SUB_SITE }}/multiupload" target="_blank"> <h1>sRNAbench (batch mode): </h1></a>
            <h3>Profiling of several small RNAs read files at once using sRNAbench</h3>
            </div>
        </div>
        <!-- /.col-lg-12 -->
    </div>


    <div class="row">
    <div class="col-lg-9">

    <div class="panel panel-default">
    <div class="panel-heading">
        <h4 class="panel-title">
            <a data-toggle="collapse" href="#collapseOne">Data to upload</a> <a  data-toggle="modal" data-target="#Choose_Input" class="btn btn-link"><i class="fa fa-question-circle"> </i></a>
        </h4>


    </div>
    <div id="collapseOne" class="panel-collapse collapse in">
        <div class="panel-body">
        <div style="margin-bottom: 20px;">
    <button type="button" class="btn btn-primary js-upload-photos">
      <span class="glyphicon glyphicon-cloud-upload"></span> Upload files
    </button>
    <input id="fileupload" type="file" name="file" multiple
           style="display: none;"
           data-url="{{ request_path }}"
{#           data-url="{% url 'photos:progress_bar_upload' %}"#}
           data-form-data='{"csrfmiddlewaretoken": "{{ csrf_token }}"}'>
  </div>


  <table id="gallery" class="table table-bordered">
    <thead>
      <tr>
        <th>Uploaded Files</th>
      </tr>
    </thead>
    <tbody>

    {% for f,url in file_list %}
        <tr>
          <td><a href="{{ url }}">{{ f }}</a></td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="modal fade" id="modal-progress" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Uploading...</h4>
        </div>
        <div class="modal-body">
          <div class="progress">
            <div class="progress-bar" role="progressbar" style="width: 0%;">0%</div>
          </div>
        </div>
      </div>
    </div>
  </div>
        {% load crispy_forms_tags %}
        {% crispy form %}
        </div>

    </div>
</div>
    </div>

    <div class="col-lg-3">
            <div class="panel panel-info">
            <div class="panel-heading">
                <h4 class="panel-title">
                    Help
                </h4>
            </div>
            <div class="panel-body">
                <a href="{{ settings.MANUAL_URL }}" target="_blank">Link to Web Manual</a>
{#                <a href="http://bioinfo5.ugr.es/sRNAbench/sRNAbench_web.pdf" target="_blank">Link to Web Manual</a>#}
                </div>

                </div>

    </div>


        <div class="col-lg-3">
            <div class="panel panel-success">
            <div class="panel-heading">
                <h4 class="panel-title">
                    Test Data Description
                </h4>
            </div>
            <div class="panel-body">
                Secreted exosomes and cell fraction of a lymphoblastoid cell line (LCLs). Small RNAs of human and virus origin can be detected.
                <br>
                <a href="http://www.cell.com/cell-reports/fulltext/S2211-1247%2814%2900703-7"  target="_blank">Link To Publication</a>
            </div>
            </div>

    </div>

    <div class="col-lg-3">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">
                    Test Data Parameters
                </h4>
            </div>
            <div class="panel-body">
                Input Files:
                <br>
                <a href="{% static '/IK_exosomes.fastq.gz' %}" download> <i class="fa fa-download fa-fw"></i> IK_exo.fastq.gz</a>
                <br>
                <a href="{% static '/IK_cell.fastq.gz' %}" download> <i class="fa fa-download fa-fw"></i> IK_cell.fastq.gz</a>
                <br>

                Or use SRA IDs: <pre style=" white-space: nowrap; overflow-y: hidden">
                SRR1563060
                <br>
                SRR1563062
                <br>
                SRR1563061
                </pre>
            </div>

        </div>
            </div>

    </div>
</div>
{#{% block photos_content %}#}


{% endblock %}

{% block modals %}
    {% include "Messages/multi/Choose_input.html" %}
{% endblock %}

